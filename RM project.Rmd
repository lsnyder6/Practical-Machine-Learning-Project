---
title: 'mtcars: How is mpg Effected by Transmission Type?'
author: "Laura Snyder"
date: "February 24, 2019"
output:
  html_document: default
  pdf_document: default
---
## Executive Summary

This report will examine the R dataset "mtcars" in an exploration of relationships between miles per gallon (mpg) and other variable values collected on 32 cars. Specifically:

1. Determine the effect the transimission type, (automatic or manual), has on the mpg; and
2. Quantify the MPG difference between the transmission types.

Evidence will be presented to show that that car mpg is effected by the transmission type, with manual transmissions supporting higher mpg. This factor, however, only accounts for 33% of the effect as seen in the 7.4 mean mpg difference found in cars with manual transmissions. Other important variables include number of cylinders, diplacement, horsepower, and vehicle weight. These factors together explain 86% of the variation in mpg. The true effect of transmission type is 1.8 mpg improvement in manual transmission cars.

## Exploratory Analysis

Load the data set and common R tools. Look at the general appearance of the data set, and its description. Figure 1 in the Appendix shows the head of the data set.

```{r eval=FALSE}
data("mtcars")
library(dplyr)
library(ggplot2)
```
"mtcars" is a data set included with R. It is a data frame with 32 observations on 11 (numeric) variables, which can be found by typing in ?mtcars in R. Of interest are the variables (mpg, cyl, disp, hp, drat, wt, qsec, vs, am (Transmission type, with 0=automatic, 1=manual), gear and carb.

Set variables of interest as factors for easier analysis and name levels of "am" with descriptive titles. "am" is the variable which will indicate whether the car is automatic ("0") or manual ("1").

```{r eval=FALSE}
cols<-c("cyl","vs","am","gear","carb")
levels(mtcars$am)<-c("Automatic","Manual")
mtcars[cols]<-lapply(mtcars[cols],factor)
```
Check to see that the class of each variable is appropriate (to include the newly formed factors).
```{r eval=FALSE}
sapply(mtcars,class)
```
A boxplot will provide a strong initial visulization, by providing a simple comparison in mpg means for automatic and manual transmissions. See Figure 2 in the Appendix for the plot.

It appears that there is a difference in mpg; a method is needed to determine if this difference in means is supportable; use hypothesis testing.
```{r echo=TRUE}
automatic <- mtcars[mtcars$am == 0,]
manual <- mtcars[mtcars$am == 1,]
t.test(automatic$mpg, manual$mpg)
```
The t-test results suggest that the result is significant. A p-value of .001374 suggest that the null hypothesis should be rejected. H null is that the means are the same. WIth a p-value well below the standard reject value of 0.05, we can conclude that there is strong evidence that the means are different.

As a method of confirmation, calculate the mean mpg for automatic and manual transmission, to confirm t.test results. It does match.

```{r eval=FALSE}
aggregate(mpg~am, data = mtcars, mean)
```
## Regression Models

Now that we have determined that there is a true difference in the mpg in automatic vs. manual transimission, a linear model can be built to explain that relationship.

Build a linear models to determine if mpg differences are explained by transmission type, and to what extent, and whether other important variables should be considered. The summary is in Figure x of the Appendix.

```{r}
lm1 <- lm(mpg ~ am, data = mtcars)
```
The results include an r squared value of .33, suggesting that 33% of the diffence in mpg can be explained by the transmission factor. But what else is important? Generalized Linear Models (GLMs) will help. In this way, other variables can be considered as important factors in building a model.

First, compare all variables in the mtcar dataset to mpg to explore relationships. See Figure 3 in the Appendix for the pairwise comparison.

Using the paired graphs, visually inspect and look for likely relationships. The graphs of mph vs. am, disp, hp and wt all seem promising.

```{r eval=FALSE}
anova(lm1, glm1)
```
```{r echo=TRUE}
glm1 <- lm(mpg~am + cyl + disp + hp + wt, data = mtcars)
anova(lm1, glm1)
```
ANOVA is analysis of variance, and can be used to compare the simple linear model to the multivariate model. Considering all of these items, 86% of the differences are accounted for through the model. The p-value is now very low, 8.637e-08, which indicates it is a good model. The difference in mpg is 1.8, on the multivariate model.

Figure 4 shows the summary results for both the linear model and the multivariate model.

Effect of the residuals should be examined as well. See Figure 5 in the Appendix for the plot.

## Appendix

Figure 1

```{r echo=TRUE}
head(mtcars)
```
Figure 2

```{r echo=TRUE}
boxplot(mpg ~ am, data = mtcars, col=c("yellow", "orange"), ylab = "Miles/Gallon", xlab = "Transmission")
```
Figure 3

```{r echo=TRUE}
pairs(mpg~.,data=mtcars)
```
Figure 4
```{r echo=TRUE}
summary(lm1)
summary(glm1)
```
Figure 5
```{r echo=TRUE}
par(mfrow = c(2,2))
plot(glm1)
```
